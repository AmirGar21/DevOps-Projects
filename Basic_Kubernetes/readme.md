# Kubernetes — краткий мануал

## Part 1. Использование готового манифеста

1. Запустить окружение Kubernetes (minikube) с памятью 4 GB.  
2. Применить готовый манифест из `/src/example` к кластеру.  
3. Запустить панель управления Kubernetes: `minikube dashboard`.  
4. Пробросить туннели для сервисов: `minikube services`.  
5. Проверить работоспособность приложения, открыв страницу сервиса Apache в браузере.

---

## Part 2. Написание собственного манифеста

1. Написать YAML-манифесты для приложения из `/src/services`:
   - ConfigMap с хостами БД и сервисов.  
   - Secrets с логинами, паролями и ключами межсервисной авторизации.  
   - Pods и Services для всех модулей: `postgres`, `rabbitmq` и 7 сервисов приложения (по 1 реплике для каждого).  
2. Применить манифесты командой: `kubectl apply -f <манифест>.yaml`.  
3. Проверить статус объектов:
   - `kubectl get <тип> <имя>`  
   - `kubectl describe <тип> <имя>`  
4. Проверить секреты:  
   - `kubectl get secret my-secret -o jsonpath='{.data.password}' | base64 --decode`.  
5. Просмотреть логи подов: `kubectl logs <имя_контейнера>`.  
6. Пробросить туннели для gateway service и session service.  
7. Прогнать функциональные тесты через Postman.  
8. Проверить кластер через `minikube dashboard`:  
   - состояние узлов, список Pod, загрузка CPU/памяти, логи, конфигурации и секреты.  
9. Обновить приложение (новая зависимость в pom.xml) и пересобрать, проверив стратегии развертывания:
   - пересоздание (recreate)  
   - последовательное обновление (rolling)  
   - зафиксировать время переразвертывания в отчете.
